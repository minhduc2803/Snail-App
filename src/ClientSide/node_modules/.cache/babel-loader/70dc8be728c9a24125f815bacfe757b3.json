{"ast":null,"code":"import _regeneratorRuntime from \"/home/ubuntu/MinhDuc/module-11/fresher-program-2020/submissions/module-11/ducnm8/src/clientSide/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ubuntu/MinhDuc/module-11/fresher-program-2020/submissions/module-11/ducnm8/src/clientSide/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/ubuntu/MinhDuc/module-11/fresher-program-2020/submissions/module-11/ducnm8/src/clientSide/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ubuntu/MinhDuc/module-11/fresher-program-2020/submissions/module-11/ducnm8/src/clientSide/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ubuntu/MinhDuc/module-11/fresher-program-2020/submissions/module-11/ducnm8/src/clientSide/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ubuntu/MinhDuc/module-11/fresher-program-2020/submissions/module-11/ducnm8/src/clientSide/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ubuntu/MinhDuc/module-11/fresher-program-2020/submissions/module-11/ducnm8/src/clientSide/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ubuntu/MinhDuc/module-11/fresher-program-2020/submissions/module-11/ducnm8/src/clientSide/src/components/App/index.js\";\nimport React from 'react';\nimport Messenger from '../Messenger';\nimport Register from '../Register'; // const Welcome = ({user, onSignOut})=> {\n//   // This is a dumb \"stateless\" component\n//   return (\n//     <div>\n//       Welcome <strong>{user.username}</strong>!\n//       <a href=\"javascript:;\" onClick={onSignOut}>Sign out</a>\n//     </div>\n//   )\n// }\n\nvar LoginForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LoginForm, _React$Component);\n\n  function LoginForm() {\n    _classCallCheck(this, LoginForm);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LoginForm).apply(this, arguments));\n  }\n\n  _createClass(LoginForm, [{\n    key: \"loginAsync\",\n    value: function () {\n      var _loginAsync = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(Username, Password) {\n        var content, rawReponse;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                content = {\n                  UserID: -1,\n                  Username: \"\",\n                  Fullname: \"\"\n                };\n                _context.prev = 1;\n                _context.next = 4;\n                return fetch('http://localhost:8055/api/public/login', {\n                  method: 'POST',\n                  headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    Username: Username,\n                    Password: Password\n                  })\n                });\n\n              case 4:\n                rawReponse = _context.sent;\n                _context.next = 7;\n                return rawReponse.json();\n\n              case 7:\n                content = _context.sent;\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(_context.t0);\n\n              case 13:\n                return _context.abrupt(\"return\", content.data);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 10]]);\n      }));\n\n      function loginAsync(_x, _x2) {\n        return _loginAsync.apply(this, arguments);\n      }\n\n      return loginAsync;\n    }()\n  }, {\n    key: \"handleSignIn\",\n    value: function handleSignIn(e) {\n      var _this = this;\n\n      e.preventDefault();\n      var Username = this.refs.Username.value;\n      var Password = this.refs.Password.value;\n      this.loginAsync(Username, Password).then(function (content) {\n        if (content) {\n          if (content.Username !== \"\") {\n            _this.props.onSignIn(content.UserID, content.Username, content.Fullname);\n\n            console.log(typeof content);\n          } else alert(\"Wrong Username or Password\");\n        } else {\n          alert(\"Backend server is not working\");\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        class: \"card-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"\",\n        class: \"float-right btn btn-outline-primary mt-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"Log in\"), React.createElement(\"h4\", {\n        class: \"card-title mt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Sign up\")), React.createElement(\"article\", {\n        class: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSignIn.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"Username\"), React.createElement(\"input\", {\n        ref: \"Username\",\n        type: \"text\",\n        className: \"form-control\",\n        id: \"exampleInputEmail1\",\n        placeholder: \"Enter Username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Password\"), React.createElement(\"input\", {\n        ref: \"Password\",\n        type: \"password\",\n        className: \"form-control\",\n        id: \"exampleInputPassword1\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        value: \"Login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Submit\")))))));\n    }\n  }]);\n\n  return LoginForm;\n}(React.Component);\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(App, _React$Component2);\n\n  function App(props) {\n    var _this2;\n\n    _classCallCheck(this, App);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props)); // the initial application state\n\n    _this2.state = {\n      user: null,\n      isRegister: false\n    };\n    return _this2;\n  } // App \"actions\" (functions that modify state)\n\n\n  _createClass(App, [{\n    key: \"signIn\",\n    value: function signIn(UserId, Username, Fullname) {\n      // This is where you would call Firebase, an API etc...\n      // calling setState will re-render the entire app (efficiently!)\n      this.setState({\n        user: {\n          UserID: UserId,\n          Username: Username,\n          Fullname: Fullname\n        },\n        isRegister: false\n      });\n    }\n  }, {\n    key: \"signOut\",\n    value: function signOut() {\n      // clear out user from state\n      this.setState({\n        user: null,\n        isRegister: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, this.state.isRegister ? React.createElement(Register, {\n        onSignIn: this.signIn.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }) : this.state.user ? React.createElement(Messenger, {\n        user: this.state.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }) : React.createElement(LoginForm, {\n        onSignIn: this.signIn.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["/home/ubuntu/MinhDuc/module-11/fresher-program-2020/submissions/module-11/ducnm8/src/clientSide/src/components/App/index.js"],"names":["React","Messenger","Register","LoginForm","Username","Password","content","UserID","Fullname","fetch","method","headers","body","JSON","stringify","rawReponse","json","console","log","data","e","preventDefault","refs","value","loginAsync","then","props","onSignIn","alert","handleSignIn","bind","Component","App","state","user","isRegister","UserId","setState","signIn"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Messenger from '../Messenger';\nimport Register from '../Register';\n\n\n\n// const Welcome = ({user, onSignOut})=> {\n//   // This is a dumb \"stateless\" component\n//   return (\n//     <div>\n//       Welcome <strong>{user.username}</strong>!\n//       <a href=\"javascript:;\" onClick={onSignOut}>Sign out</a>\n//     </div>\n//   )\n// }\n\nclass LoginForm extends React.Component {\n  \n  async loginAsync(Username, Password){\n    let content = {\n      UserID: -1,\n      Username: \"\",\n      Fullname: \"\",\n    }\n    try{\n      let rawReponse = await fetch('http://localhost:8055/api/public/login',{\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        Username: Username,\n        Password: Password\n      })\n\n    });\n    content = await rawReponse.json();\n  }catch(e){\n    console.log(e);\n  }\n    return content.data;\n  }\n\n  handleSignIn(e) {\n    e.preventDefault()\n    let Username = this.refs.Username.value\n    let Password = this.refs.Password.value\n\n    \n   this.loginAsync(Username, Password)\n    .then( content => {\n      if(content){\n        if(content.Username !== \"\"){\n            this.props.onSignIn(content.UserID, content.Username, content.Fullname);\n            console.log(typeof(content));\n        }else\n            alert(\"Wrong Username or Password\");\n      }else{\n          alert(\"Backend server is not working\");\n      }\n    });\n        \n   \n  }\n  \n  render() {\n    return (\n      <div className=\"container\">\n\n<div class=\"row justify-content-center\">\n<div class=\"col-md-6\">\n<div class=\"card\">\n<header class=\"card-header\">\n\t<a href=\"\" class=\"float-right btn btn-outline-primary mt-1\">Log in</a>\n\t<h4 class=\"card-title mt-2\">Sign up</h4>\n</header>\n<article class=\"card-body\">\n\n        <form onSubmit={this.handleSignIn.bind(this)}>\n\n              <div className=\"form-group\">\n                <label>Username</label>\n                <input ref=\"Username\" type=\"text\" className=\"form-control\" id=\"exampleInputEmail1\" placeholder=\"Enter Username\"/>\n              </div>\n\n              <div className=\"form-group\">\n                <label >Password</label>\n                <input ref=\"Password\" type=\"password\" className=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\"/>\n              </div>\n              \n              <button type=\"submit\" className=\"btn btn-primary\" value=\"Login\">Submit</button>\n        </form>\n        </article>\n        </div>\n        </div>\n        </div>\n      </div>\n    )\n  }\n\n}\n\n\nclass App extends React.Component {\n  \n  constructor(props) {\n    super(props)\n    // the initial application state\n    this.state = {\n      user: null,\n      isRegister: false,\n    }\n  }\n  \n  // App \"actions\" (functions that modify state)\n  signIn(UserId, Username, Fullname) {\n    // This is where you would call Firebase, an API etc...\n    // calling setState will re-render the entire app (efficiently!)\n    this.setState({\n      user: {\n        UserID: UserId,\n        Username: Username,\n        Fullname: Fullname\n      },\n      isRegister: false,\n    })\n  }\n  \n  signOut() {\n    // clear out user from state\n    this.setState({user: null, isRegister: false})\n  }\n  \n  render() {\n   \n    return (\n      <div>\n        { (this.state.isRegister) ? \n          <Register onSignIn={this.signIn.bind(this)}/>\n          :\n          (this.state.user) ? \n            <Messenger user={this.state.user}/>\n            :\n            <LoginForm \n             onSignIn={this.signIn.bind(this)} \n             \n            />\n        }\n      </div>\n    )\n    \n  }\n  \n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}