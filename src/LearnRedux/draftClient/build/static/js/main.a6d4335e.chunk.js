(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(77)},30:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),i=(a(30),a(1));a(37);function s(){return r.a.createElement("div",{className:"conversation-search"},r.a.createElement("input",{type:"search",className:"conversation-search-input",placeholder:"Search Messages"}))}var l=a(22);a(39);function u(e){Object(n.useEffect)(function(){Object(l.a)(".conversation-snippet",20)});var t=e.data,a=t.photo,c=t.name,o=t.text;return r.a.createElement("div",{className:"conversation-list-item"},r.a.createElement("img",{className:"conversation-photo",src:a,alt:"conversation"}),r.a.createElement("div",{className:"conversation-info"},r.a.createElement("h1",{className:"conversation-title"},c),r.a.createElement("p",{className:"conversation-snippet"},o)))}a(41);function m(e){var t=e.title,a=e.leftItems,n=e.rightItems;return r.a.createElement("div",{className:"toolbar"},r.a.createElement("div",{className:"left-items"},a),r.a.createElement("h1",{className:"toolbar-title"},t),r.a.createElement("div",{className:"right-items"},n))}a(43);function d(e){var t=e.icon;return r.a.createElement("i",{className:"toolbar-button ".concat(t)})}a(45);function p(e){var t=Object(i.c)(function(e){return e.listUsers}).map(function(e,t){return{index:t,photo:"#",name:"".concat(e.Fullname),text:"Hello world! This is a long message that needs to be truncated."}});return r.a.createElement("div",{className:"conversation-list"},r.a.createElement(m,{title:"Messenger",leftItems:[r.a.createElement(d,{key:"cog",icon:"ion-ios-cog"})],rightItems:[r.a.createElement(d,{key:"add",icon:"ion-ios-add-circle-outline"})]}),r.a.createElement(s,null),t.map(function(e){return r.a.createElement(u,{key:e.index,data:e})}))}var f=a(3);a(47);function v(e){return r.a.createElement("div",{className:"compose"},r.a.createElement("input",{type:"text",className:"compose-input",placeholder:"Type a message, @name"}),e.rightItems)}var h=a(4),E=a.n(h);a(50);function g(e){var t=e.data,a=e.isMine,n=e.startsSequence,c=e.endsSequence,o=e.showTimestamp,i=E()(t.timestamp).format("LLLL");return r.a.createElement("div",{className:["message","".concat(a?"mine":""),"".concat(n?"start":""),"".concat(c?"end":"")].join(" ")},o&&r.a.createElement("div",{className:"timestamp"},i),r.a.createElement("div",{className:"bubble-container"},r.a.createElement("div",{className:"bubble",title:i},t.message)))}a(52);function b(e){var t=Object(i.c)(function(e){return e.listUsers[e.chosenIndex]});void 0===t&&(t={chat:[]}),void 0===t.chat&&(t=Object(f.a)({},t,{chat:[]}));var a=Object(i.c)(function(e){return e.user}),n=a.fullname;console.log(t);var c=t.chat.map(function(e,n){return{id:n+1,author:e.UserSendID===a.userID?t.Fullname:a.fullname,message:e.Content,timestamp:e.SentTime}});console.log(c);return r.a.createElement("div",{className:"message-list"},r.a.createElement(m,{title:"Conversation Title",rightItems:[r.a.createElement(d,{key:"info",icon:"ion-ios-information-circle-outline"}),r.a.createElement(d,{key:"video",icon:"ion-ios-videocam"}),r.a.createElement(d,{key:"phone",icon:"ion-ios-call"})]}),r.a.createElement("div",{className:"message-list-container"},function(){for(var e=0,t=c.length,a=[];e<t;){var o=c[e-1],i=c[e],s=c[e+1],l=i.author===n,u=E()(i.timestamp),m=!0,d=!0,p=!0;if(o){var f=E()(o.timestamp),v=E.a.duration(u.diff(f));o.author===i.author&&v.as("hours")<1&&(m=!1),v.as("hours")<1&&(p=!1)}if(s){var h=E()(s.timestamp),b=E.a.duration(h.diff(u));s.author===i.author&&b.as("hours")<1&&(d=!1)}a.push(r.a.createElement(g,{key:e,isMine:l,startsSequence:m,endsSequence:d,showTimestamp:p,data:i})),e+=1}return a}()),r.a.createElement(v,{rightItems:[r.a.createElement(d,{key:"photo",icon:"ion-ios-camera"}),r.a.createElement(d,{key:"image",icon:"ion-ios-image"}),r.a.createElement(d,{key:"audio",icon:"ion-ios-mic"}),r.a.createElement(d,{key:"money",icon:"ion-ios-card"}),r.a.createElement(d,{key:"games",icon:"ion-logo-game-controller-b"}),r.a.createElement(d,{key:"emoji",icon:"ion-ios-happy"})]}))}a(54);var N=a(6),y=a.n(N);function O(e,t){return function(a,n){var r={UserReceiveID:t.UserID};return r=JSON.stringify(r),console.log(r),y()({method:"post",url:"http://localhost:8055/api/protected/list-chat",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n().user.token)},data:r,validateStatus:function(){return!0}}).then(function(t){200!==t.status?alert(t.data.message):a({type:"LOAD_CHAT",chat:t.data.data,index:e})}).catch(function(e){})}}function S(e){var t=Object(i.b)();return t(function(e,t){return y()({method:"get",url:"http://localhost:8055/api/protected/list-user",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t().user.token)},validateStatus:function(){return!0}}).then(function(t){return 200!==t.status?(alert(t.data.message),[]):(e({type:"LOAD_USERS",listUsers:t.data.data}),t.data.data)})}).then(function(e){for(var a=0;a<e.length;a++)t(O(a,e[a]))}),r.a.createElement("div",{className:"messenger"},r.a.createElement("div",{className:"scrollable sidebar"},r.a.createElement(p,null)),r.a.createElement("div",{className:"scrollable content"},r.a.createElement(b,null)))}a(73);function I(e){var t=r.a.useRef(null),a=r.a.useRef(null),n=Object(i.b)();function c(e){e.preventDefault();var r=t.current.value,c=a.current.value;n(function(e,t){return function(a,n){a({type:"START_LOGIN",username:e});var r={Username:e,Password:t};return r=JSON.stringify(r),y()({method:"post",url:"http://localhost:8055/api/public/login",headers:{"Content-Type":"application/json"},data:r,validateStatus:function(){return!0}}).then(function(e){if(200!==e.status)alert(e.data.message);else{var t={userID:e.data.data.UserID,username:n().user.username,fullname:e.data.data.Fullname,token:e.data.data.token};console.log(e.data),a(function(e){return{type:"ALREADY_LOGIN",user:e}}(t))}}).catch(function(e){})}}(r,c))}return r.a.createElement("div",{className:"container"},r.a.createElement("section",{id:"content"},r.a.createElement("form",{onSubmit:function(e){c(e)}},r.a.createElement("h1",null,"Snail Project"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",ref:t,placeholder:"Username",required:!0,id:"username"})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",ref:a,placeholder:"Password",required:!0,id:"password"})),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:"Log in"}),r.a.createElement("button",{className:"example_a",onClick:function(){return n({type:"REGISTER"})}},"Register")))))}a(75);function j(e){var t=r.a.useRef(null),a=r.a.useRef(null),n=r.a.useRef(null),c=Object(i.b)();function o(e){e.preventDefault();var r=t.current.value,o=a.current.value,i=n.current.value;c(function(e,t,a){return function(n){var r={Username:e,Fullname:t,Password:a};return r=JSON.stringify(r),y()({method:"post",url:"http://localhost:8055/api/public/register",headers:{"Content-Type":"application/json"},data:r,validateStatus:function(){return!0}}).then(function(e){200!==e.status?alert(e.data.message):(alert("Register successfully"),n({type:"LOGIN"}))}).catch(function(e){})}}(r,o,i))}return r.a.createElement("div",{className:"container"},r.a.createElement("section",{id:"content"},r.a.createElement("form",{onSubmit:function(e){o(e)}},r.a.createElement("h1",null,"Snail Project"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",ref:t,placeholder:"Username",required:"",id:"username"})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",ref:a,placeholder:"Fullname",required:"",id:"fullname"})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",ref:n,placeholder:"Password",required:"",id:"password"})),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:"Register"}),r.a.createElement("button",{className:"example_a",onClick:function(){return c({type:"LOGIN"})}},"Login")))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(5),w=a(23),k=a(24),R={loginState:"LOGIN",user:{},listUsers:[],chosenIndex:0},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALREADY_LOGIN":return Object(f.a)({},e,{loginState:"ALREADY_LOGIN",user:t.user});case"LOGIN":return Object(f.a)({},e,{loginState:"LOGIN"});case"REGISTER":return Object(f.a)({},e,{loginState:"REGISTER"});case"START_LOGIN":return Object(f.a)({},e,{user:{username:t.username}});case"LOAD_USERS":return Object(f.a)({},e,{listUsers:t.listUsers});case"LOAD_CHAT":return Object(f.a)({},e,{listUsers:e.listUsers.map(function(e,a){return a===t.index?Object(f.a)({},e,{chat:t.chat}):e})});default:return e}},T=Object(L.c)(A,Object(L.a)(w.a,Object(k.createLogger)()));o.a.render(r.a.createElement(i.a,{store:T},r.a.createElement(function(){var e=Object(i.c)(function(e){return e.loginState}),t=r.a.createElement(j,null);return"LOGIN"===e?t=r.a.createElement(I,null):"ALREADY_LOGIN"===e&&(t=r.a.createElement(S,null)),r.a.createElement("div",{className:"App"},t)},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.a6d4335e.chunk.js.map